# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    Makefile                                           :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: saneveu <saneveu@student.42.fr>            +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2019/10/18 10:56:12 by apons             #+#    #+#              #
#    Updated: 2020/02/04 18:51:42 by saneveu          ###   ########.fr        #
#                                                                              #
# **************************************************************************** #

BLACK	=	\033[30m
RED		=	\033[31m
GREEN	=	\033[32m
YELLOW	=	\033[33m
BLUE	=	\033[34m
PURPLE	=	\033[35m
TUR		=	\033[36m
WHITE	=	\033[37m
END		=	\033[0m

UP 		=	\033[A
CUT 	=	\033[K


CFLAGS = -Wall -Werror -Wextra -Iincludes -Ilibft -Iminilibx_macos
MLXFLAGS = -lmlx -framework OpenGL -framework AppKit
SDLFLAGS = `sdl2-config --cflags --libs`

NAME = DoomNukem
OS		=	$(shell uname)

# directories
SRCDIR	=	./src
INCDIR	=	./includes
OBJDIR	=	./ob

LIBDIR = libft
LIB = libft.a

MLXDIR = minilibx_macos
MLX = libmlx.a

_C = main.c\
	 src/fc_draw.c\
	 src/ft_error.c\
	 src/ft_freewolf.c\
	 src/ft_help.c\
	 src/key_handle.c\
	 src/mlx_handle.c\
	 src/mobility.c\
	 src/raycasting.c\
	 src/wall_draw.c\
	 src/wolf_init.c

_O = ${_C:%.c=%.o}

ifeq ($(OS), Linux)
	SDL		=	-lSDL2-2.0 -lSDL2_ttf -lSDL2_mixer
	DIRSDL	=	
else
	SDL		=	-F ~/Library/Frameworks -framework SDL2 -framework SDL2_ttf -framework SDL2_mixer
	DIRSDL	=	-I ./SDL
endif 

all: $(NAME)

$(NAME): ${_O}
	@make -C $(MLXDIR)
	@make -C $(LIBDIR)
	@gcc $(CFLAGS) $(MLXFLAGS) $(SDLFLAGS) -o $(NAME) $(_O) $(LIBDIR)/$(LIB) $(MLXDIR)/$(MLX)

clean:
	@make -C $(MLXDIR) clean
	@make -C $(LIBDIR) clean
	@/bin/rm -f $(_O)

fclean: clean
	/bin/rm -f $(MLXDIR)/$(MLX)
	make -C $(LIBDIR) fclean
	/bin/rm -f $(NAME)

re: fclean all

.PHONY: all clean fclean re
